---
layout: post
title: "CPP Container"
date: 2016-07-26
---

# 容器  

- 标准库定义的容器分为 顺序容器 和 关联容器  
- 顺序容器 内的元素按其位置存储和访问  
- 关联容器 其元素按键排序  
- 容器类共享公共的接口  
  
> 将单一类型的元素聚集起来成为容器，然后按照位置来存储和访问这些元素，这就是顺序容器。  
> 顺序容器的排列次序与元素值无关，而是由元素添加到容器内的次序决定。  
> 标准库定义了三种顺序容器: vector list deque   
> 标准库的三种顺序容器的差别在于访问元素的方式以及添加删除元素相关操作的运行代价
> 标准库提供的三种适配器: stack queue priority_queue

## 顺序容器  
  
#### 顺序容器的初始化  

- 默认构造函数 C<T> c
- 将一个容器初始化为另一个容器的副本 C<T> c(c2) 创建容器c2的副本c，要求两个容器的类型和内部元素完全相同
- 初始化为一段元素的副本 C<T> c(b, e)  b和e是迭代器
- 分配和初始化指定数目的元素 C<T> c(n, t)  C<T> c(n)  NOTE: 只适用于顺序容器

> 当不使用默认构造函数，而是使用其他的构造函数初始化容器时，必须指出该容器有多少个元素，并提供这些元素的初值

#### 容器内元素的约定类型  

> 容器内的元素必须满足两个约定:  
>  > - 元素类型必须支持赋值运算符
>  > - 元素类型的对象必须可以被复制


- 支持赋值和复制功能是容器元素的最基本要求。  
- 某些容器操作对容器内的元素类型有特殊要求。
- 容器内的容器 书写的时候 注意用空格隔开两个相邻的 > 符号。  


## 迭代器和迭代器的范围  

> - 所有迭代器都支持的运算 : 解引用 自增自减 关系操作符 == 和 !=     
> - vector 和 deque 额外支持的运算 ： 迭代器算术运算 + - += -= 关系操作符 >= <= > <

> 只有vector和deque两种容器提供对其元素快速随机的访问。  

> - 迭代器范围 为左闭合区间  

> - 对形成迭代器范围的迭代器的要求:
> > - 指向同一个容器中的元素或者超出末端的下一个位置
> > - 如果这两个迭代器不相等，则对first迭代器反复坐自增运算必须能够达到last。换句话说，last决不能位于first之前  


## 顺序容器的操作  

  
#### 容器定义的类型别名

- size_type 无符号整型 
- iterator 迭代器类型 
- const_iterator 只读迭代器类型 
- reverse_iterator 逆序迭代器
- const_reverse_iterator 只读的逆序迭代器
- difference_type 迭代器差值的有符号整型，可为负值 
- value_type 元素类型 
- reference 元素的左值类型 等效于 value_type&  
- const_reference 元素的常量左值类型 等效于 const value_type& 

  
#### 在顺序容器中添加元素

- c.push_pack(t) 在容器c的尾部添加 所有的顺序容器都支持 
- c.push_front(t) 在容器c的前端添加 list deque 两种顺序容器支持 
- c.insert(p, t) 在迭代器p所指的元素之前添加 返回值新添加元素的迭代器 
- c.isnert(p, n, t) 
- c.insert(p, begin, end) 
  
  
> 在容器元素内添加的元素都是副本  
> 任何insert和push操作都有可能使迭代器失效 
> 避免存储end返回的迭代器 
  
  
#### 容器大小的操作 

- c.size()
- c.max_size()
- c.empty()
- c.resize(n)
- c.resize(n, t)  
  
> resize 操作可能会使迭代器失效  
  
  
#### 访问元素  
  
- c.back()
- c.front()
- c[n]  只适用于 vector deque
- c.at(n) 只适用于 vector deque  

#### 删除元素 

- c.erase(p) 删除迭代器p指向的元素 返回值为被删除元素后面元素的迭代器
- c.erase(b, e) 删除迭代器b和e所指范围的元素 返回值为被删除元素段后面的元素，若e指向超出末端的下一个位置，则返回值也为超出末端位置的迭代器
- c.clear() 删除所有的
- c.pop_back() 
- c.pop_front() 只适用于 list deque

  
#### 赋值和swap

- c1 = c2 赋值操作符首先删除左操作数容器内的所有元素，然后将右操作数容器的所有元素插入到左边容器。c1和c2的类型必须完全相同
- c.assign(b,e) 
- c.assign(n,t)
- c1.swap(c2) c1和c2类型必须完全相同 比赋值操作快  
  
> 赋值和assign操作会使左操作数的容器的所有迭代器失效。swap操作不会使迭代器失效。
> swap操作不会删除或插入任何元素，而且在常量时间内完成操作。 

